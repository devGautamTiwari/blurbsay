(this["webpackJsonpfacebook-messenger-clone"]=this["webpackJsonpfacebook-messenger-clone"]||[]).push([[0],{104:function(e,a,t){},106:function(e,a,t){},107:function(e,a,t){},108:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(9),l=t.n(r),i=(t(87),t(10)),o=t(54),s=t(13),m=t(45),u=t(142),d=t(145),f=t(146),g=t(111),b=t(153),p=t(66),E=t.n(p),h=t(53),v=t.n(h),j=t(65),O=t.n(j),_=t(46),y=t.n(_),S=y.a.initializeApp({apiKey:"AIzaSyAMY2JtBqFngQAu3rdCEeoYh5WCIu7xT9c",authDomain:"blurbsay.firebaseapp.com",databaseURL:"https://blurbsay.firebaseio.com",projectId:"blurbsay",storageBucket:"blurbsay.appspot.com",messagingSenderId:"406380711850",appId:"1:406380711850:web:7b2694b95acdcad74165d3"}),C=S.auth(),N=S.firestore(),k=(t(99),Object(n.forwardRef)((function(e,a){var t=Object(n.useState)(e.message.text),r=Object(i.a)(t,2),l=r[0],o=r[1],s=Object(n.useState)(!1),p=Object(i.a)(s,2),h=p[0],j=p[1],_=e.email===e.message.email,y=function(e,a){N.collection("messages").doc(e).set({text:a,edited:!0},{merge:!0}),j(!1)};return c.a.createElement("div",{ref:a,className:"message ".concat(_&&"message__user")},c.a.createElement("p",{className:"message__username"},!_&&e.message.username,e.message.edited&&!_&&" (edited)"),_&&c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{className:"message__edit",onClick:function(e){j(!h)}},c.a.createElement(O.a,{color:"primary"})),c.a.createElement(u.a,{className:"message__delete",onClick:function(){return N.collection("messages").doc(e.id).delete()}},c.a.createElement(E.a,{color:"error"}))),c.a.createElement(d.a,{className:_?"message__userCard":"message__guestCard"},c.a.createElement(f.a,null,h?c.a.createElement("form",null,c.a.createElement(b.a,{value:l,variant:"outlined",multiline:!0,size:"small",onChange:function(e){return o(e.target.value)},onBlur:function(){y(e.id,l)},onKeyPress:function(a){m.isMobile||a.shiftKey||"Enter"!==a.key||(a.preventDefault(),y(e.id,l))}}),c.a.createElement(u.a,{className:"message__iconButton",disabled:!l,variant:"contained",color:"primary",type:"submit",onClick:function(){return y(e.id,l)}},c.a.createElement(v.a,null))):c.a.createElement(g.a,{color:"textPrimary",className:"message__text ".concat(_&&"message__userText"),variant:"h6",component:"h6"},l))))}))),x=t(147),w=t(156),I=t(67),F=Object(n.createContext)(),W=function(e){var a=Object(n.useState)(""),t=Object(i.a)(a,2),r=t[0],l=t[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(null),f=Object(i.a)(d,2),g=f[0],b=f[1];return c.a.createElement(F.Provider,{value:[[r,l],[m,u],[g,b]]},e.children)};t(104);var A=function(){var e=Object(n.useState)(""),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useContext)(F),o=Object(i.a)(l,4),d=Object(i.a)(o[0],1)[0],f=Object(i.a)(o[1],1)[0],g=Object(i.a)(o[3],2),p=g[0],E=g[1],h=Object(n.useState)([]),j=Object(i.a)(h,2),O=j[0],_=j[1],S=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=N.collection("messages").orderBy("timestamp","asc").limit(100).onSnapshot((function(e){_(e.docs.map((function(e){return{id:e.id,message:e.data()}}))),S.current.scrollIntoView({behavior:"smooth"})}));return function(){return e()}}),[]);var W=function(e){e.preventDefault(),t&&(N.collection("messages").add({text:t,username:f,email:d,timestamp:y.a.firestore.FieldValue.serverTimestamp()}),r(""))};return c.a.createElement("div",{className:"chat__main"},c.a.createElement("div",{className:"chat__welcome"},c.a.createElement("h2",{style:{marginLeft:"18px"}},"Welcome ",""!==f&&f,"!"," "),c.a.createElement(x.a,{className:"chat__signout",onClick:function(){return C.signOut(),E(!0),setTimeout((function(){E(!1)}),4e3),c.a.createElement(s.a,{to:"/signin"})},disabled:p,variant:"subtitle1",color:"primary"},"Sign out")),c.a.createElement("div",{className:"chat__chat"},c.a.createElement(I.a,{className:"chat__flipmove"},O.map((function(e){var a=e.id,t=e.message;return c.a.createElement(k,{key:a,username:f,message:t,email:d,id:a})}))),c.a.createElement("div",{ref:S})),c.a.createElement("div",null,c.a.createElement("form",{className:"chat__form"},c.a.createElement(w.a,{className:"chat__formControl"},c.a.createElement(b.a,{className:"chat__input",variant:"outlined",placeholder:"Type a message...",value:t,multiline:!0,size:"small",onChange:function(e){return r(e.target.value)},onKeyPress:function(e){m.isMobile||e.shiftKey||"Enter"!==e.key||(e.preventDefault(),W(e))},autoFocus:!0}),c.a.createElement(u.a,{className:"chat__iconButton",disabled:!t,variant:"contained",color:"primary",type:"submit",onClick:W},c.a.createElement(v.a,null))))))},B=t(155),T=t(152),D=t(150),L=t(151),K=t(154),M=t(68),P=t.n(M),z=t(148),J=t(149);t(106);function R(){return c.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","Messenger003 ",(new Date).getFullYear(),".")}var Y=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"#F9C784",color:"#000000"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function q(){var e=Y(),a=Object(n.useContext)(F),t=Object(i.a)(a,3),r=Object(i.a)(t[0],2),l=r[0],o=r[1],s=(Object(i.a)(t[1],1),Object(i.a)(t[2],1),Object(n.useState)([])),m=Object(i.a)(s,2),u=m[0],d=m[1],f={url:"https://blurbsay.web.app/signin",handleCodeInApp:!0},p=Object(n.useState)(!1),E=Object(i.a)(p,2),h=E[0],v=E[1];Object(n.useEffect)((function(){h&&C.isSignInWithEmailLink(window.location.href)&&(o(localStorage.getItem("emailForSignIn")),l?C.signInWithEmailLink(l,window.location.href).then((function(e){localStorage.removeItem("emailForSignIn")})).catch((function(e){return d(e)})):o(prompt("Please provide your email for confirmation"))),console.log("signin page loading")}),[]);return c.a.createElement(J.a,{component:"main",className:"signin__container",maxWidth:"xs"},c.a.createElement(D.a,null),c.a.createElement("div",{className:e.paper},c.a.createElement(B.a,{className:e.avatar},c.a.createElement(P.a,null)),c.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign in"),c.a.createElement(g.a,{color:"error"},u.message),c.a.createElement("form",{className:e.form},c.a.createElement(L.a,{container:!0,spacing:2},c.a.createElement(L.a,{item:!0,xs:12},c.a.createElement(b.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:l,onChange:function(e){o(e.target.value)},autoComplete:"email",autoFocus:!0})),c.a.createElement(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){!function(e){e.preventDefault(),C.sendSignInLinkToEmail(l,f).then((function(e){d({}),v(!0),localStorage.setItem("emailForSignIn",l)})).catch((function(e){return d(e)}))}(e)},value:h?"Link sent!":"Get Sign In Link",disabled:h})))),c.a.createElement(K.a,{mt:8},c.a.createElement(R,null)))}t(107);function V(){var e=Object(n.useContext)(F),a=Object(i.a)(e,3),t=Object(i.a)(a[0],2)[1],r=Object(i.a)(a[1],2)[1],l=Object(i.a)(a[2],2),m=l[0],u=l[1];return Object(n.useEffect)((function(){var e=C.onAuthStateChanged((function(e){e?(u(e),t(e.email),r(e.displayName)):(u(null),r(""),t(""))}));return function(){e()}}),[m]),c.a.createElement("div",{className:"App"},c.a.createElement(o.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/"},m?c.a.createElement(A,null):c.a.createElement(s.a,{to:"signin"})),c.a.createElement(s.b,{exact:!0,path:"/signin",component:q}))))}var G=function(){return c.a.createElement(W,null,c.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,a,t){e.exports=t(108)},87:function(e,a,t){},99:function(e,a,t){}},[[82,1,2]]]);
//# sourceMappingURL=main.e3949328.chunk.js.map